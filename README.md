# 長照紀錄表單系統

這是一個使用 React + Tailwind CSS 建立的長照紀錄表單系統，使用 IndexedDB 本地資料庫儲存資料，確保資料永久保存且重啟瀏覽器不會遺失。

## 功能特色

- 📝 完整的長照紀錄表單
- 🗄️ 本地 IndexedDB 資料庫，資料永久保存
- 👥 多使用者支援，個案管理系統
- 📊 歷史紀錄表格顯示
- 🔍 即時搜尋和篩選功能
- 📱 響應式設計，支援手機和桌面
- 🎨 美觀的 Tailwind CSS 介面
- 📤 匯出 Excel 和 PDF 報告功能
- 👤 單一病患紀錄篩選和匯出
- 📋 詳細病患報告生成
- 📈 統計資料顯示
- 📊 健康趨勢圖表分析
- 🔄 自動資料同步和備份

## 表單欄位

### 基本資料
- 姓名（必填）
- 年齡（必填）
- 房號（必填）

### 用餐狀況
- 早餐、午餐、晚餐（選項：吃完/吃一半/未進食）

### 健康監測
- 喝水量（ml）
- 血壓（收縮壓/舒張壓）
- 脈搏（次/分）
- 體溫（°C）
- 睡眠狀況（好/中/差）

### 其他
- 備註（文字輸入）

## 安裝與執行

1. 安裝依賴套件：
```bash
npm install
```

2. 啟動開發伺服器：
```bash
npm start
```

3. 在瀏覽器中開啟 http://localhost:3000

## 專案結構

```
src/
├── components/
│   ├── CareRecordForm.js    # 長照紀錄表單組件
│   └── HistoryTable.js      # 歷史紀錄表格組件
├── App.js                   # 主應用程式組件
├── index.js                 # 應用程式入口點
└── index.css                # Tailwind CSS 樣式
```

## 技術棧

- React 18
- Tailwind CSS 3
- JavaScript ES6+
- IndexedDB (本地資料庫)
- idb (IndexedDB 操作庫)
- Chart.js (圖表庫)
- react-chartjs-2 (React 圖表組件)
- jsPDF (PDF 生成)
- jspdf-autotable (PDF 表格)
- xlsx (Excel 匯出)

## 使用說明

### 基本操作
1. **個案管理**：點擊「👥 個案管理」按鈕建立和管理個案名單
2. **選擇個案**：在表單中選擇已建立的個案，系統會自動填入基本資料
3. **填寫紀錄**：選擇用餐狀況、睡眠狀況和健康監測數據
4. **可選填備註**：添加額外的備註資訊
5. **儲存紀錄**：點擊「儲存紀錄」按鈕，資料會自動關聯到選定的個案
6. **查看歷史**：在歷史紀錄表格中查看所有個案的紀錄

### 個案管理功能
1. **新增個案**：在個案管理頁面新增個案，包含姓名、年齡、房號、性別、診斷等資訊
2. **編輯個案**：可以修改個案的基本資料和聯絡資訊
3. **搜尋個案**：支援按姓名、房號或診斷搜尋個案
4. **個案統計**：顯示總個案數、活躍個案數、平均年齡等統計資訊
5. **個案狀態**：支援活躍/非活躍狀態管理

### 健康趨勢圖表
1. **血壓趨勢**：顯示收縮壓和舒張壓的變化趨勢
2. **體溫變化**：追蹤每日體溫記錄和變化
3. **喝水量統計**：分析每日攝水量和趨勢
4. **睡眠品質**：評估睡眠狀況的變化
5. **用餐狀況**：統計各餐的進食情況
6. **時間範圍**：支援 7 天、30 天、3 個月的資料分析

### 搜尋和篩選
1. **即時搜尋**：在搜尋框中輸入關鍵字，可搜尋姓名、房號或備註
2. **病患篩選**：使用下拉選單選擇特定病患查看其紀錄
3. **組合篩選**：可同時使用搜尋和病患篩選功能

### 匯出功能
1. **匯出所有紀錄**：
   - 點擊「📊 匯出 Excel」下載所有紀錄的 Excel 檔案
   - 點擊「📄 匯出 PDF」下載所有紀錄的 PDF 檔案

2. **匯出篩選結果**：
   - 點擊「📊 匯出篩選結果」匯出當前篩選條件的 Excel 檔案
   - 點擊「📄 匯出篩選結果」匯出當前篩選條件的 PDF 檔案
   - 選擇特定病患後點擊「📋 [病患姓名] 詳細報告」生成詳細 PDF 報告

### 檔案格式說明
- **Excel 檔案**：適合護理師進行數據分析和統計
- **PDF 表格**：適合列印和紙本存檔
- **詳細報告**：包含每筆紀錄的完整資訊，適合家屬查看

## 資料庫特色

### IndexedDB 本地資料庫
- **永久儲存**：資料儲存在瀏覽器的 IndexedDB 中，重啟瀏覽器不會遺失
- **高效能**：支援大量資料儲存和快速查詢
- **索引支援**：建立多個索引，支援快速搜尋和篩選
- **自動備份**：資料庫會自動建立備份，確保資料安全

### 資料結構
- **主鍵**：自動遞增的 ID
- **索引**：姓名、日期、房號、姓名+日期組合索引
- **時間戳**：建立時間和更新時間記錄
- **版本控制**：支援資料庫結構升級

## 注意事項

- 資料儲存在瀏覽器的 IndexedDB 中，清除瀏覽器資料會導致紀錄遺失
- 建議定期匯出資料作為備份
- 此系統僅供參考，不應替代專業醫療建議
- 支援現代瀏覽器，建議使用 Chrome、Firefox、Safari 或 Edge
